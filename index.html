<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8" />

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
	
	<!-- css -->
	<link href="css/typeahead.css" rel="stylesheet" media="screen">
	<link href="css/main.css" rel="stylesheet" media="screen">
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.css" />
	<!--[if lte IE 8]>
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.ie.css" />
	<![endif]-->
	
    <!--
    External javascript libraries
    -->
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.24.custom.min.js"></script>
    <script type="text/javascript" src="js/jquery.qtip-1.0.0-rc3.min.js"></script>
    <script type="text/javascript" src="js/path.js"></script>
    <script type="text/javascript" src="js/mustache.js"></script>
	<script src="http://cdn.leafletjs.com/leaflet-0.5/leaflet.js"></script>	

    <!--
    Javascript
    -->
    <script type="text/javascript" src="js/data.js"></script>
    <script type="text/javascript" src="js/autocomplete.js"></script>
    <script type="text/javascript" src="js/routing.js"></script>
    <script type="text/javascript" src="js/map.js"></script>
	
	<script>
		var loc="";//contient les coordonnées du point de départ
				
		//GEOLOC
		if (navigator.geolocation)
		{
		  navigator.geolocation.getCurrentPosition(function(position)
		  {
			loc = position.coords.latitude + "," +position.coords.longitude;
			$("input#gps").val(loc);
		  });
		}
		else
		  alert("Votre navigateur ne prend pas en compte la géolocalisation HTML5");
		  		
				
		//INIT
		$(document).ready(function(){
			//autocomplete
			$('#ville').typeahead([{
				name: 'name_startsWith',
				//remote: 'http://ws.geonames.org/searchJSON?name_startsWith=%QUERY&country=FR&maxRows=5',
				template: '<p>{{places}}</p>',
				engine: Hogan
			}]);		
		
			//event handlers
			$("a#go").click(function(e){
				console.log("begin");
				locateStart(loc);
				//appel fonction recup de data
				t=loc.split(",");
				get_data(t[0], t[1], 100000, 10, visu_map);
			});
		});
	</script>	

</head>
<body>

<div style="clear: both;"></div>

<div class="container-fluid">

    <!--Body content-->
    <div id="content">
	
		<h1>Map</h1>
	
		<input type="text" id="ville" placeholder="Entrez une ville..." />
		
		<input type="text" id="gps" placeholder="Coordonnées GPS" />
	
		<a href="#" id="go">Go !</a>
	
		<div id="map"></div>
		
	    <input type="text" class="span3" style="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source='["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]'>

        <div class="autocomplete-cities">
            <input class="typeahead" type="text" placeholder="Ville">
        </div>

        <br>
        <br>
        <br>
        <br>
        <br>
    </div>

</div>


<script src="js/bootstrap.min.js"></script>
<script src="js/typeahead.js"></script>
<script src="js/hogan.js"></script>

</body>
</html>


