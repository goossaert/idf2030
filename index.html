<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8" />

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
	
	<!-- css -->
	<link href="css/typeahead.css" rel="stylesheet" media="screen">
	<link href="css/main.css" rel="stylesheet" media="screen">
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
	<link href="css/leaflet.css" rel="stylesheet" media="screen">
	<!--[if lte IE 8]>
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.ie.css" />
	<![endif]-->
	
    <!--
    External javascript libraries
    -->
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.24.custom.min.js"></script>
    <script type="text/javascript" src="js/jquery.qtip-1.0.0-rc3.min.js"></script>
    <script type="text/javascript" src="js/path.js"></script>
    <script type="text/javascript" src="js/mustache.js"></script>
	<script src="http://cdn.leafletjs.com/leaflet-0.5/leaflet.js"></script>	
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap-typeahead.js"></script>
    <script src="js/hogan.js"></script>

    <!--
    Javascript
    -->
    <script type="text/javascript" src="js/data.js"></script>
    <script type="text/javascript" src="js/autocomplete.js"></script>
    <script type="text/javascript" src="js/routing.js"></script>
    <script type="text/javascript" src="js/map.js"></script>
	
	<script>
		var loc="";//contient les coordonnées du point de départ
				
		//GEOLOC
		if (navigator.geolocation)
		{
		  navigator.geolocation.getCurrentPosition(function(position)
		  {
			loc = position.coords.latitude + "," +position.coords.longitude;
			$("input#gps").val(loc);
			//=> on peut lancer le getdata direct
		  });
		}
		else
		  console.log("Pas de geoloc");
		  		
				
		//INIT
		$(document).ready(function(){
			//event handlers
			$("a#go").click(function(e){
				console.log("begin");
				$("section#content nav").toggle();
				locateStart(loc);
				//appel fonction recup de data
				t=loc.split(",");
				//get_data(t[0], t[1], $("#distance").val(), 100, visu_map);
				get_data(t[0], t[1], $("#distance").val(), 10, visu_map);
			});
		});
	</script>	

</head>
<body>

<!--Body content-->
<section id="content">

	<h1>Titre</h1>

	<nav>
		<input class="typeahead" type="text" placeholder="Ville" value="" />		
		<input type="text" id="gps" placeholder="Coordonnées GPS" value="" />
		<input type="text" name="distance" id="distance" value="100000" value="" />		
		<a href="#" id="go">Go !</a>
	</nav>

	<div id="map"></div>
	
</section>


</body>
</html>


